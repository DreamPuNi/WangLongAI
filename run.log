[DEBUG][2025-03-03 22:23:56][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 22:23:56][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 22:23:56][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 22:23:57][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 22:23:57][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 22:23:57][config.py:269] - [Config] User datas file not found, ignore.
[INFO][2025-03-03 22:24:08][config.py:353] - [Config] Configuration saved.
[DEBUG][2025-03-03 23:03:14][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:03:14][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:03:14][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:03:14][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:03:14][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:03:14][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:03:18][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:03:18][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:03:18][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:03:18][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:03:18][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:03:18][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:03:19][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-03 23:03:19][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-03 23:03:19][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-03 23:03:19][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-03 23:03:19][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-03 23:03:19][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-03 23:03:19][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-03 23:03:19][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-03 23:03:19][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-03 23:03:19][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-03 23:03:19][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-03 23:03:19][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-03 23:03:19][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-03 23:03:19][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-03 23:03:19][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-03 23:03:19][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-03 23:03:19][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-03 23:03:19][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-03 23:03:19][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-03 23:03:19][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-03 23:03:19][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为5432。
[INFO][2025-03-03 23:03:19][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-03 23:03:19][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-03 23:03:19][keyword.py:41] - [keyword] {}
[INFO][2025-03-03 23:03:19][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-03 23:03:19][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-03 23:03:19][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-03 23:03:19][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-03 23:03:19][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-03 23:03:19][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-03 23:03:19][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-03 23:03:19][hello.py:37] - [Hello] inited
[INFO][2025-03-03 23:03:19][finish.py:21] - [Finish] inited
[INFO][2025-03-03 23:03:19][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-03 23:03:19][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-03 23:03:22][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-03 23:03:22][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-03 23:05:34][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:05:34][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:05:34][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:05:34][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:05:34][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:05:34][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:05:39][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:05:39][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:05:39][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:05:39][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:05:39][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:05:39][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:05:39][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-03 23:05:39][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-03 23:05:39][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-03 23:05:39][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-03 23:05:39][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-03 23:05:39][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-03 23:05:39][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-03 23:05:39][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-03 23:05:39][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-03 23:05:39][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-03 23:05:39][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-03 23:05:39][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-03 23:05:39][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-03 23:05:39][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-03 23:05:39][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-03 23:05:39][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-03 23:05:39][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-03 23:05:39][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-03 23:05:39][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-03 23:05:39][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-03 23:05:39][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为7691。
[INFO][2025-03-03 23:05:39][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-03 23:05:39][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-03 23:05:39][keyword.py:41] - [keyword] {}
[INFO][2025-03-03 23:05:39][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-03 23:05:39][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-03 23:05:39][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-03 23:05:39][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-03 23:05:39][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-03 23:05:39][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-03 23:05:39][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-03 23:05:39][hello.py:37] - [Hello] inited
[INFO][2025-03-03 23:05:39][finish.py:21] - [Finish] inited
[INFO][2025-03-03 23:05:39][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-03 23:05:39][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-03 23:05:42][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-03 23:05:42][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-03 23:06:15][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:06:15][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:06:15][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:06:15][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:06:15][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:06:15][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:06:15][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-03 23:06:15][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-03 23:06:15][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-03 23:06:15][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-03 23:06:15][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-03 23:06:15][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-03 23:06:15][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-03 23:06:15][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-03 23:06:15][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-03 23:06:15][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-03 23:06:15][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-03 23:06:15][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-03 23:06:15][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-03 23:06:15][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-03 23:06:15][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-03 23:06:15][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-03 23:06:15][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-03 23:06:15][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-03 23:06:15][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-03 23:06:15][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-03 23:06:15][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为0291。
[INFO][2025-03-03 23:06:15][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-03 23:06:15][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-03 23:06:15][keyword.py:41] - [keyword] {}
[INFO][2025-03-03 23:06:15][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-03 23:06:15][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-03 23:06:15][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-03 23:06:15][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-03 23:06:15][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-03 23:06:15][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-03 23:06:15][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-03 23:06:15][hello.py:37] - [Hello] inited
[INFO][2025-03-03 23:06:15][finish.py:21] - [Finish] inited
[INFO][2025-03-03 23:06:15][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-03 23:06:15][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-03 23:06:18][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-03 23:06:18][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-03 23:06:22][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":182577979,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe5\x9c\xa8\xe5\x90\x97"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741014379,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_RY8whW49|v1_RY8whW49</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe5\x9c\xa8\xe5\x90\x97","NewMsgId":8559588109156712719,"MsgSeq":857733211},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-03 23:06:22][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-03 23:08:05][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:08:05][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:08:05][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:08:05][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:08:05][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:08:05][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:08:05][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-03 23:08:05][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-03 23:08:05][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-03 23:08:05][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-03 23:08:05][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-03 23:08:05][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-03 23:08:05][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-03 23:08:05][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-03 23:08:05][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-03 23:08:05][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-03 23:08:05][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-03 23:08:05][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-03 23:08:05][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-03 23:08:05][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-03 23:08:05][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-03 23:08:05][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-03 23:08:05][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-03 23:08:05][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-03 23:08:05][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-03 23:08:05][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-03 23:08:05][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为8923。
[INFO][2025-03-03 23:08:05][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-03 23:08:05][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-03 23:08:05][keyword.py:41] - [keyword] {}
[INFO][2025-03-03 23:08:05][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-03 23:08:05][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-03 23:08:05][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-03 23:08:05][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-03 23:08:05][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-03 23:08:05][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-03 23:08:05][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-03 23:08:05][hello.py:37] - [Hello] inited
[INFO][2025-03-03 23:08:05][finish.py:21] - [Finish] inited
[INFO][2025-03-03 23:08:05][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-03 23:08:05][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-03 23:08:08][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-03 23:08:08][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-03 23:12:42][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:12:42][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:12:42][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-03 23:12:42][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-03 23:12:42][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-03 23:12:42][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 00:53:13][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 00:53:13][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 00:53:13][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 00:53:13][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 00:53:13][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 00:53:13][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 00:56:50][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 00:56:50][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 00:56:50][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 00:56:51][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 00:56:51][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 00:56:51][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 01:00:18][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 01:00:18][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 01:00:18][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 01:00:18][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 01:00:18][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 01:00:18][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 01:02:10][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 01:02:10][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 01:02:10][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 01:02:11][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 01:02:11][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 01:02:11][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 01:04:05][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 01:04:05][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 01:04:05][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 01:04:05][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 01:04:05][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 01:04:05][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 01:04:59][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 01:04:59][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 01:04:59][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 01:05:00][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 01:05:00][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 01:05:00][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 01:05:56][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 01:05:56][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 01:05:56][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 01:05:57][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 01:05:57][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 01:05:57][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:05:42][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:05:42][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:05:42][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:05:43][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:05:43][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:05:43][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:05:53][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:05:53][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:05:53][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:05:53][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:05:53][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'coze', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:05:53][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:05:54][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:05:54][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:05:54][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:05:54][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:05:54][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:05:54][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:05:54][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:05:54][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:05:54][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:05:54][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:05:54][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:05:54][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:05:54][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:05:54][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:05:54][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:05:54][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:05:54][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:05:54][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:05:54][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:05:54][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:05:54][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为7241。
[INFO][2025-03-04 02:05:54][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:05:54][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:05:54][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:05:54][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:05:54][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:05:54][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:05:54][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:05:54][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:05:54][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:05:54][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:05:54][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:05:54][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:05:54][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:05:54][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:05:57][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:05:57][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:06:05][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1466062938,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"hello"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741025164,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_CyI+dxYl|v1_CyI+dxYl</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : hello","NewMsgId":7759880324871098922,"MsgSeq":857733231},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:06:06][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:06:11][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=hello, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001A47138C6E0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:06:11][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=hello, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001A47138C6E0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:06:11][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:06:11][godcmd.py:217] - [Godcmd] on_handle_context. content: hello
[DEBUG][2025-03-04 02:06:11][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:06:11][keyword.py:53] - [keyword] on_handle_context. content: hello
[DEBUG][2025-03-04 02:06:11][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:06:11][hello.py:96] - [Hello] on_handle_context. content: hello
[DEBUG][2025-03-04 02:06:11][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:06:11][finish.py:28] - [Finish] on_handle_context. content: hello
[DEBUG][2025-03-04 02:06:11][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=hello
[INFO][2025-03-04 02:06:11][bridge.py:73] - create bot coze for chat
[INFO][2025-03-04 02:06:12][bytedance_coze_bot.py:41] - [COZE] query=hello
[DEBUG][2025-03-04 02:06:12][bytedance_coze_bot.py:56] - [COZE] user_id=何颂生
[DEBUG][2025-03-04 02:06:12][bytedance_coze_bot.py:59] - [COZE] session=<bot.bytedance.coze_session.CozeSession object at 0x000001A47138CEF0> query=hello
[DEBUG][2025-03-04 02:06:19][bytedance_coze_bot.py:234] - [COZE] new_query=[{'role': 'user', 'content': 'hello'}], session_id=wxid_j9m9a65vqqvc22, reply_cont=「在的老板」, completion_tokens=6
[DEBUG][2025-03-04 02:06:19][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「在的老板」)
[DEBUG][2025-03-04 02:06:19][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「在的老板」), context: Context(type=TEXT, content=hello, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001A47138C6E0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000001A46FFAA750>})
[INFO][2025-03-04 02:06:21][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「在的老板」
[DEBUG][2025-03-04 02:06:21][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:08:49][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1590075418,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe6\x9c\x80\xe8\xbf\x91\xe6\x9c\x89\xe5\x95\xa5\xe5\xa5\xbd\xe9\xa1\xb9\xe7\x9b\xae\xe5\x90\x97"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741025328,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_JUVhuL7w|v1_JUVhuL7w</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe6\x9c\x80\xe8\xbf\x91\xe6\x9c\x89\xe5\x95\xa5\xe5\xa5\xbd\xe9\xa1\xb9\xe7\x9b\xae\xe5\x90\x97","NewMsgId":8289635939651913740,"MsgSeq":857733233},"Wxid":"wxid_7im0hocoravz22"}'
[DEBUG][2025-03-04 02:08:49][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"ModContacts","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"UserName":{"string":"wxid_1x2uq9gpjn4722"},"NickName":{"string":"\xe8\x82\x89\xe8\x82\x89\xe7\xba\xaf"},"PyInitial":{"string":"RRC"},"QuanPin":{"string":"rourouchun"},"Sex":1,"ImgBuf":{"iLen":0},"BitMask":4294967295,"BitVal":1,"ImgFlag":2,"Remark":{"string":"T-\xe7\x9b\x9b\xe4\xb8\x96\xe6\x96\xb0\xe9\x80\x94-\xe8\xb5\xb5\xe6\xb3\xbd\xe5\xae\x87"},"RemarkPyinitial":{"string":"TSSXTZZY"},"RemarkQuanPin":{"string":"Tshengshixintuzhaozeyu"},"ContactType":0,"RoomInfoCount":0,"DomainList":[{}],"ChatRoomNotify":0,"AddContactScene":0,"Province":"Shanxi","City":"Yuncheng","PersonalCard":1,"HasWeiXinHdHeadImg":1,"VerifyFlag":0,"Level":7,"Source":1000030,"Alias":"Marlboro-zzy","WeiboFlag":0,"AlbumStyle":0,"AlbumFlag":0,"SnsUserInfo":{"SnsFlag":1,"SnsBgimgId":"http://shmmsns.qpic.cn/mmsns/axBxWgTDIM5XOC0ES9Ac3aLbNl9PGVVHGqYY38lyYytQq6pUJjwqe5mibDkynoosVjpufHicx0uP8/0","SnsBgobjectId":14471393971714536013,"SnsFlagEx":6273},"Country":"CN","BigHeadImgUrl":"https://wx.qlogo.cn/mmhead/ver_1/xmTW6LHjoLicr1pgwiaJQARBEyibgFjc9OaKAbQZ0tia8RkTm2PfcrpFibnQYiagG2058HKBEz4Acb9u2QrwwZqSibWYMHZXmBtYMAIGACYnS803DYFTzrtR6f90pAbS4k0MPBn/0","SmallHeadImgUrl":"https://wx.qlogo.cn/mmhead/ver_1/xmTW6LHjoLicr1pgwiaJQARBEyibgFjc9OaKAbQZ0tia8RkTm2PfcrpFibnQYiagG2058HKBEz4Acb9u2QrwwZqSibWYMHZXmBtYMAIGACYnS803DYFTzrtR6f90pAbS4k0MPBn/132","CustomizedInfo":{"BrandFlag":0},"EncryptUserName":"v3_020b3826fd03010000000000f185261e6d03c3000000501ea9a3dba12f95f6b60a0536a1adb6ef00d9aa9f76fe753975d6c6ea1388328c8510461a130c29a9b86f9f41a207d7be06ce1100b01a1af5e08fb9347ab248a9b3a08449ef78c30a2b0d8d@stranger","AdditionalContactList":{"LinkedinContactItem":{}},"ChatroomMaxCount":0,"DeleteFlag":0,"Description":"\\b\\u0000\\u0018\\u0000\\"\\u0000(\\u00008\\u0000","ChatroomStatus":0,"Extflag":0,"ChatRoomBusinessType":0},"Wxid":"wxid_7im0hocoravz22"}'
[WARNING][2025-03-04 02:08:49][gewechat_message.py:310] - [gewechat] Missing 'NewMsgId' in message data
[DEBUG][2025-03-04 02:08:49][gewechat_channel.py:259] - [gewechat] ignore expired message from None: None
[INFO][2025-03-04 02:08:50][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:08:55][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=最近有啥好项目吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001A471B56420>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:08:55][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=最近有啥好项目吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001A471B56420>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:08:55][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:08:55][godcmd.py:217] - [Godcmd] on_handle_context. content: 最近有啥好项目吗
[DEBUG][2025-03-04 02:08:55][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:08:55][keyword.py:53] - [keyword] on_handle_context. content: 最近有啥好项目吗
[DEBUG][2025-03-04 02:08:55][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:08:55][hello.py:96] - [Hello] on_handle_context. content: 最近有啥好项目吗
[DEBUG][2025-03-04 02:08:55][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:08:55][finish.py:28] - [Finish] on_handle_context. content: 最近有啥好项目吗
[DEBUG][2025-03-04 02:08:55][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=最近有啥好项目吗
[INFO][2025-03-04 02:08:55][bytedance_coze_bot.py:41] - [COZE] query=最近有啥好项目吗
[DEBUG][2025-03-04 02:08:55][bytedance_coze_bot.py:56] - [COZE] user_id=何颂生
[DEBUG][2025-03-04 02:08:55][bytedance_coze_bot.py:59] - [COZE] session=<bot.bytedance.coze_session.CozeSession object at 0x000001A47138CEF0> query=最近有啥好项目吗
[DEBUG][2025-03-04 02:09:02][bytedance_coze_bot.py:234] - [COZE] new_query=[{'role': 'user', 'content': 'hello'}, {'role': 'user', 'content': '最近有啥好项目吗'}], session_id=wxid_j9m9a65vqqvc22, reply_cont=「减肥食谱养生粉项目、小红书债务优化项目、前端打粉项目、视频号项目都不错，前期准备手机和电脑就行。 」, completion_tokens=51
[DEBUG][2025-03-04 02:09:02][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「减肥食谱养生粉项目、小红书债务优化项目、前端打粉项目、视频号项目都不错，前期准备手机和电脑就行。 」)
[DEBUG][2025-03-04 02:09:02][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「减肥食谱养生粉项目、小红书债务优化项目、前端打粉项目、视频号项目都不错，前期准备手机和电脑就行。 」), context: Context(type=TEXT, content=最近有啥好项目吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001A471B56420>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000001A46FFAA750>})
[INFO][2025-03-04 02:09:17][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「减肥食谱养生粉项目、小红书债务优化项目、前端打粉项目、视频号项目都不错，前期准备手机和电脑就行。 」
[DEBUG][2025-03-04 02:09:17][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[INFO][2025-03-04 02:10:01][config.py:353] - [Config] Configuration saved.
[DEBUG][2025-03-04 02:10:04][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:10:04][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:10:04][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:10:04][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:10:04][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:10:04][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:10:04][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:10:04][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:10:04][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:10:04][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:10:04][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:10:04][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:10:04][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:10:04][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:10:04][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:10:04][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:10:04][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:10:04][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:10:04][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:10:04][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:10:04][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:10:04][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:10:04][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:10:04][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:10:04][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:10:04][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:10:04][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为4701。
[INFO][2025-03-04 02:10:04][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:10:04][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:10:04][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:10:04][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:10:04][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:10:04][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:10:04][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:10:04][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:10:04][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:10:04][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:10:04][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:10:04][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:10:04][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:10:04][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:10:07][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:10:07][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:10:10][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1560432931,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe5\x9c\xa8\xe5\x90\x97"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741025409,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_R/RmOr6b|v1_R/RmOr6b</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe5\x9c\xa8\xe5\x90\x97","NewMsgId":3801353022223229535,"MsgSeq":857733235},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:10:10][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:10:15][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001378B38C7D0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:10:15][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001378B38C7D0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:10:15][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:10:15][godcmd.py:217] - [Godcmd] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:10:15][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:10:15][keyword.py:53] - [keyword] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:10:15][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:10:15][hello.py:96] - [Hello] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:10:15][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:10:15][finish.py:28] - [Finish] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:10:15][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=在吗
[INFO][2025-03-04 02:10:15][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:10:16][dify_bot.py:35] - [DIFY] query=在吗
[DEBUG][2025-03-04 02:10:16][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:10:16][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:10:16][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x000001378B38C710> query=在吗
[DEBUG][2025-03-04 02:10:21][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1662, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 100, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1762, 'total_price': '0E-7', 'currency': 'USD', 'latency': 3.8497280010196846}
[DEBUG][2025-03-04 02:10:21][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「嗨喽 您好，您是打算近期来三亚玩吗?」)
[DEBUG][2025-03-04 02:10:21][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「嗨喽 您好，您是打算近期来三亚玩吗?」), context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001378B38C7D0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000001378AF7A540>})
[INFO][2025-03-04 02:10:27][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「嗨喽 您好，您是打算近期来三亚玩吗?」
[DEBUG][2025-03-04 02:10:27][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:11:29][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:11:29][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:11:29][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:11:29][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:11:29][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:11:29][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:11:38][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:11:38][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:11:38][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:11:38][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:11:38][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:11:38][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:11:38][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:11:38][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:11:38][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:11:38][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:11:38][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:11:38][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:11:38][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:11:38][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:11:38][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:11:38][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:11:38][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:11:38][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:11:38][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:11:38][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:11:38][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:11:38][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:11:38][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:11:38][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:11:38][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:11:38][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:11:38][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为0648。
[INFO][2025-03-04 02:11:38][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:11:38][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:11:38][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:11:38][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:11:38][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:11:38][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:11:38][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:11:38][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:11:38][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:11:38][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:11:38][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:11:38][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:11:38][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:11:38][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:11:41][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:11:41][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:11:50][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1894270919,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe5\xaf\xb9\xe7\x9a\x84\xe5\x91\x80"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741025509,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_wi/es6ZW|v1_wi/es6ZW</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe5\xaf\xb9\xe7\x9a\x84\xe5\x91\x80","NewMsgId":2895020204539294424,"MsgSeq":857733238},"Wxid":"wxid_7im0hocoravz22"}'
[DEBUG][2025-03-04 02:11:50][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":200257444,"FromUserName":{"string":"wxid_7im0hocoravz22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":10002,"Content":{"string":"<sysmsg type=\\"ClientCheckConsistency\\"><ClientCheckConsistency><clientcheck><fullpathfilename>WeChat</fullpathfilename><fileoffset>0</fileoffset><checkbuffersize>9999999</checkbuffersize><seq>536870912</seq></clientcheck></ClientCheckConsistency></sysmsg>"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741025427,"MsgSource":"<msgsource>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","NewMsgId":3983184323987359485,"MsgSeq":857733237},"Wxid":"wxid_7im0hocoravz22"}'
[DEBUG][2025-03-04 02:11:50][gewechat_channel.py:254] - [gewechat] ignore message from myself: wxid_7im0hocoravz22: None
[INFO][2025-03-04 02:11:50][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:11:55][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=对的呀, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x00000213E062CBC0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:11:55][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=对的呀, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x00000213E062CBC0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:11:55][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:11:55][godcmd.py:217] - [Godcmd] on_handle_context. content: 对的呀
[DEBUG][2025-03-04 02:11:55][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:11:55][keyword.py:53] - [keyword] on_handle_context. content: 对的呀
[DEBUG][2025-03-04 02:11:55][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:11:55][hello.py:96] - [Hello] on_handle_context. content: 对的呀
[DEBUG][2025-03-04 02:11:55][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:11:55][finish.py:28] - [Finish] on_handle_context. content: 对的呀
[DEBUG][2025-03-04 02:11:55][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=对的呀
[INFO][2025-03-04 02:11:55][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:11:55][dify_bot.py:35] - [DIFY] query=对的呀
[DEBUG][2025-03-04 02:11:55][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:11:55][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:11:55][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x00000213E062D820> query=对的呀
[DEBUG][2025-03-04 02:12:01][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1583, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 110, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1693, 'total_price': '0E-7', 'currency': 'USD', 'latency': 3.571284811987425}
[DEBUG][2025-03-04 02:12:01][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「嗨喽 您好，您是打算近期来三亚玩吗?」)
[DEBUG][2025-03-04 02:12:01][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「嗨喽 您好，您是打算近期来三亚玩吗?」), context: Context(type=TEXT, content=对的呀, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x00000213E062CBC0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x00000213DF24A810>})
[INFO][2025-03-04 02:12:06][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「嗨喽 您好，您是打算近期来三亚玩吗?」
[DEBUG][2025-03-04 02:12:06][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:15:34][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:15:34][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:15:34][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:15:34][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:15:34][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:15:34][config.py:269] - [Config] User datas file not found, ignore.
[INFO][2025-03-04 02:15:54][config.py:353] - [Config] Configuration saved.
[DEBUG][2025-03-04 02:15:57][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:15:57][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:15:57][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:15:57][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:15:57][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:15:57][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:15:58][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:15:58][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:15:58][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:15:58][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:15:58][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:15:58][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:15:58][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:15:58][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:15:58][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:15:58][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:15:58][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:15:58][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:15:58][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:15:58][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:15:58][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:15:58][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:15:58][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:15:58][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:15:58][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:15:58][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:15:58][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为1708。
[INFO][2025-03-04 02:15:58][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:15:58][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:15:58][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:15:58][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:15:58][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:15:58][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:15:58][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:15:58][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:15:58][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:15:58][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:15:58][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:15:58][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:15:58][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:15:58][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:16:01][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:16:01][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:17:03][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:17:03][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:17:03][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:17:04][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:17:04][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:17:04][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:17:12][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:17:12][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:17:12][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:17:12][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:17:12][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:17:12][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:17:12][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:17:12][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:17:12][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:17:12][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:17:12][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:17:12][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:17:12][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:17:12][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:17:12][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:17:12][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:17:12][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:17:12][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:17:12][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:17:12][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:17:12][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:17:12][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:17:12][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:17:12][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:17:12][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:17:12][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:17:12][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为8431。
[INFO][2025-03-04 02:17:12][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:17:12][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:17:12][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:17:12][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:17:12][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:17:12][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:17:12][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:17:12][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:17:12][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:17:12][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:17:12][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:17:12][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:17:12][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:17:12][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:17:15][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:17:15][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:17:34][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1900960673,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe5\x9c\xa8\xe5\x90\x97"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741025853,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_Hm6MplhY|v1_Hm6MplhY</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe5\x9c\xa8\xe5\x90\x97","NewMsgId":1927746353493061445,"MsgSeq":857733240},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:17:34][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:17:39][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000021DEB2AC590>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:17:39][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000021DEB2AC590>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:17:39][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:17:39][godcmd.py:217] - [Godcmd] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:17:39][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:17:39][keyword.py:53] - [keyword] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:17:39][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:17:39][hello.py:96] - [Hello] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:17:39][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:17:39][finish.py:28] - [Finish] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:17:39][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=在吗
[INFO][2025-03-04 02:17:39][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:17:39][dify_bot.py:35] - [DIFY] query=在吗
[DEBUG][2025-03-04 02:17:39][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:17:39][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:17:39][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x0000021DEB2AD250> query=在吗
[WARNING][2025-03-04 02:17:39][dify_bot.py:143] - [DIFY] payload={'inputs': {'user_id': 'wxid_j9m9a65vqqvc22', 'user_name': '何颂生', 'room_id': '', 'room_name': ''}, 'query': "[{'何颂生': '在吗'}]", 'response_mode': 'blocking', 'conversation_id': '', 'user': '何颂生'} response text={"code": "invalid_param", "message": "Workflow not published", "status": 400}
 status_code=400
[DEBUG][2025-03-04 02:17:39][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=我暂时遇到了一些问题，请您稍后重试~)
[DEBUG][2025-03-04 02:17:39][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=我暂时遇到了一些问题，请您稍后重试~), context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000021DEB2AC590>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x0000021DE986CAA0>})
[INFO][2025-03-04 02:17:39][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 我暂时遇到了一些问题，请您稍后重试~
[DEBUG][2025-03-04 02:17:39][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:17:47][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":221415034,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe5\x9c\xa8\xe5\x90\x97"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741025866,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_6EKn4dqM|v1_6EKn4dqM</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe5\x9c\xa8\xe5\x90\x97","NewMsgId":3748899624379351019,"MsgSeq":857733241},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:17:47][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:17:52][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000021DEB2AE6C0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:17:52][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000021DEB2AE6C0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:17:52][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:17:52][godcmd.py:217] - [Godcmd] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:17:52][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:17:52][keyword.py:53] - [keyword] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:17:52][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:17:52][hello.py:96] - [Hello] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:17:52][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:17:52][finish.py:28] - [Finish] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:17:52][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=在吗
[INFO][2025-03-04 02:17:52][dify_bot.py:35] - [DIFY] query=在吗
[DEBUG][2025-03-04 02:17:52][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:17:52][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:17:52][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x0000021DEB2AD250> query=在吗
[WARNING][2025-03-04 02:17:52][dify_bot.py:143] - [DIFY] payload={'inputs': {'user_id': 'wxid_j9m9a65vqqvc22', 'user_name': '何颂生', 'room_id': '', 'room_name': ''}, 'query': "[{'何颂生': '在吗'}, {'assistant': '我暂时遇到了一些问题，请您稍后重试~'}, {'何颂生': '在吗'}]", 'response_mode': 'blocking', 'conversation_id': '', 'user': '何颂生'} response text={"code": "invalid_param", "message": "Workflow not published", "status": 400}
 status_code=400
[DEBUG][2025-03-04 02:17:52][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=我暂时遇到了一些问题，请您稍后重试~)
[DEBUG][2025-03-04 02:17:52][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=我暂时遇到了一些问题，请您稍后重试~), context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000021DEB2AE6C0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x0000021DE986CAA0>})
[INFO][2025-03-04 02:17:52][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 我暂时遇到了一些问题，请您稍后重试~
[DEBUG][2025-03-04 02:17:52][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:18:03][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:18:03][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:18:03][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:18:03][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:18:03][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:18:03][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:18:04][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:18:04][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:18:04][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:18:04][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:18:04][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:18:04][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:18:04][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:18:04][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:18:04][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:18:04][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:18:04][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:18:04][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:18:04][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:18:04][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:18:04][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:18:04][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:18:04][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:18:04][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:18:04][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:18:04][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:18:04][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为3921。
[INFO][2025-03-04 02:18:04][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:18:04][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:18:04][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:18:04][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:18:04][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:18:04][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:18:04][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:18:04][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:18:04][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:18:04][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:18:04][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:18:04][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:18:04][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:18:04][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:18:07][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:18:07][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:18:13][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1129875062,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"run_button"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741025893,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_cAN3+Hq5|v1_cAN3+Hq5</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : run_button","NewMsgId":1933487148983476942,"MsgSeq":857733242},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:18:14][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:18:19][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=run_button, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000017C7C5DC710>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:18:19][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=run_button, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000017C7C5DC710>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:18:19][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:18:19][godcmd.py:217] - [Godcmd] on_handle_context. content: run_button
[DEBUG][2025-03-04 02:18:19][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:18:19][keyword.py:53] - [keyword] on_handle_context. content: run_button
[DEBUG][2025-03-04 02:18:19][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:18:19][hello.py:96] - [Hello] on_handle_context. content: run_button
[DEBUG][2025-03-04 02:18:19][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:18:19][finish.py:28] - [Finish] on_handle_context. content: run_button
[DEBUG][2025-03-04 02:18:19][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=run_button
[INFO][2025-03-04 02:18:19][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:18:19][dify_bot.py:35] - [DIFY] query=run_button
[DEBUG][2025-03-04 02:18:19][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:18:19][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:18:19][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x0000017C7C5DD0A0> query=run_button
[WARNING][2025-03-04 02:18:19][dify_bot.py:143] - [DIFY] payload={'inputs': {'user_id': 'wxid_j9m9a65vqqvc22', 'user_name': '何颂生', 'room_id': '', 'room_name': ''}, 'query': "[{'何颂生': 'run_button'}]", 'response_mode': 'blocking', 'conversation_id': '', 'user': '何颂生'} response text={"code": "invalid_param", "message": "Workflow not published", "status": 400}
 status_code=400
[DEBUG][2025-03-04 02:18:19][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=我暂时遇到了一些问题，请您稍后重试~)
[DEBUG][2025-03-04 02:18:19][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=我暂时遇到了一些问题，请您稍后重试~), context: Context(type=TEXT, content=run_button, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000017C7C5DC710>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x0000017C7AB3AF90>})
[INFO][2025-03-04 02:18:19][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 我暂时遇到了一些问题，请您稍后重试~
[DEBUG][2025-03-04 02:18:19][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:20:38][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:20:38][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:20:38][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:20:39][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:20:39][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:20:39][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:21:06][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:21:06][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:21:06][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:21:06][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:21:06][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:21:06][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:21:06][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:21:06][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:21:06][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:21:06][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:21:06][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:21:06][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:21:06][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:21:06][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:21:06][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:21:06][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:21:06][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:21:06][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:21:06][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:21:06][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:21:06][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:21:06][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:21:06][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:21:06][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:21:06][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:21:06][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:21:06][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为5970。
[INFO][2025-03-04 02:21:06][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:21:06][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:21:06][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:21:06][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:21:06][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:21:06][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:21:06][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:21:06][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:21:06][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:21:06][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:21:06][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:21:06][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:21:06][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:21:06][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:21:09][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:21:09][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:21:12][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1279311395,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe4\xbd\xa0\xe5\xa5\xbd"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741026071,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_kfpUJlAg|v1_kfpUJlAg</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe4\xbd\xa0\xe5\xa5\xbd","NewMsgId":119103893888491552,"MsgSeq":857733243},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:21:12][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:21:17][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000016E6D21C110>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:21:17][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000016E6D21C110>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:21:17][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:21:17][godcmd.py:217] - [Godcmd] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:21:17][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:21:17][keyword.py:53] - [keyword] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:21:17][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:21:17][hello.py:96] - [Hello] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:21:17][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:21:17][finish.py:28] - [Finish] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:21:17][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=你好
[INFO][2025-03-04 02:21:17][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:21:17][dify_bot.py:35] - [DIFY] query=你好
[DEBUG][2025-03-04 02:21:17][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:21:17][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:21:17][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x0000016E6D21CF80> query=你好
[WARNING][2025-03-04 02:21:17][dify_bot.py:143] - [DIFY] payload={'inputs': {'user_id': 'wxid_j9m9a65vqqvc22', 'user_name': '何颂生', 'room_id': '', 'room_name': ''}, 'query': "[{'何颂生': '你好'}]", 'response_mode': 'blocking', 'conversation_id': '', 'user': '何颂生'} response text={"code": "invalid_param", "message": "Workflow not published", "status": 400}
 status_code=400
[DEBUG][2025-03-04 02:21:17][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=我暂时遇到了一些问题，请您稍后重试~)
[DEBUG][2025-03-04 02:21:17][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=我暂时遇到了一些问题，请您稍后重试~), context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000016E6D21C110>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x0000016E6BD2E690>})
[INFO][2025-03-04 02:21:17][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 我暂时遇到了一些问题，请您稍后重试~
[DEBUG][2025-03-04 02:21:17][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:21:37][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1885184933,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe4\xbd\xa0\xe5\xa5\xbd"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741026096,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_hj6eRU/2|v1_hj6eRU/2</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe4\xbd\xa0\xe5\xa5\xbd","NewMsgId":3066962587555079418,"MsgSeq":857733244},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:21:38][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:21:43][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000016E6D21E4B0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:21:43][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000016E6D21E4B0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:21:43][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:21:43][godcmd.py:217] - [Godcmd] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:21:43][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:21:43][keyword.py:53] - [keyword] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:21:43][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:21:43][hello.py:96] - [Hello] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:21:43][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:21:43][finish.py:28] - [Finish] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:21:43][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=你好
[INFO][2025-03-04 02:21:43][dify_bot.py:35] - [DIFY] query=你好
[DEBUG][2025-03-04 02:21:43][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:21:43][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:21:43][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x0000016E6D21CF80> query=你好
[DEBUG][2025-03-04 02:21:46][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1911, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 59, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1970, 'total_price': '0E-7', 'currency': 'USD', 'latency': 2.5914090279839}
[DEBUG][2025-03-04 02:21:46][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=很抱歉，我遇到了一些问题，请您稍后再试。)
[DEBUG][2025-03-04 02:21:46][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=很抱歉，我遇到了一些问题，请您稍后再试。), context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000016E6D21E4B0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x0000016E6BD2E690>})
[INFO][2025-03-04 02:21:46][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 很抱歉，我遇到了一些问题，请您稍后再试。
[DEBUG][2025-03-04 02:21:46][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[INFO][2025-03-04 02:22:30][config.py:353] - [Config] Configuration saved.
[DEBUG][2025-03-04 02:22:39][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:22:39][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:22:39][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:22:39][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:22:39][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:22:39][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:22:39][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:22:39][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:22:39][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:22:39][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:22:39][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:22:39][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:22:39][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:22:39][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:22:39][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:22:39][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:22:39][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:22:39][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:22:39][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:22:39][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:22:39][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:22:39][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:22:39][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:22:39][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:22:39][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:22:39][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:22:39][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为9624。
[INFO][2025-03-04 02:22:39][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:22:39][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:22:39][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:22:39][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:22:39][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:22:39][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:22:39][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:22:39][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:22:39][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:22:39][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:22:39][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:22:39][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:22:39][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:22:39][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:22:42][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:22:42][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:22:45][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":2085403890,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe4\xbd\xa0\xe5\xa5\xbd"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741026164,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_QV+t8sHM|v1_QV+t8sHM</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe4\xbd\xa0\xe5\xa5\xbd","NewMsgId":7048972540589484125,"MsgSeq":857733245},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:22:45][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:22:51][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000028BE91BC800>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:22:51][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000028BE91BC800>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:22:51][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:22:51][godcmd.py:217] - [Godcmd] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:22:51][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:22:51][keyword.py:53] - [keyword] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:22:51][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:22:51][hello.py:96] - [Hello] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:22:51][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:22:51][finish.py:28] - [Finish] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:22:51][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=你好
[INFO][2025-03-04 02:22:51][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:22:51][dify_bot.py:35] - [DIFY] query=你好
[DEBUG][2025-03-04 02:22:51][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:22:51][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:22:51][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x0000028BE91BD1F0> query=你好
[DEBUG][2025-03-04 02:22:55][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1851, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 109, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1960, 'total_price': '0E-7', 'currency': 'USD', 'latency': 3.413976101001026}
[DEBUG][2025-03-04 02:22:55][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「嗨喽 您好，您是打算近期来三亚玩吗?」)
[DEBUG][2025-03-04 02:22:55][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「嗨喽 您好，您是打算近期来三亚玩吗?」), context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000028BE91BC800>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x0000028BE7CCE6F0>})
[INFO][2025-03-04 02:23:01][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「嗨喽 您好，您是打算近期来三亚玩吗?」
[DEBUG][2025-03-04 02:23:01][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:23:33][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:23:33][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:23:33][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:23:33][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:23:33][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:23:33][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:23:57][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:23:57][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:23:57][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:23:57][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:23:57][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****91b', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:23:57][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:23:57][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:23:57][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:23:57][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:23:57][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:23:57][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:23:57][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:23:57][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:23:57][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:23:57][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:23:57][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:23:57][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:23:57][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:23:57][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:23:57][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:23:57][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:23:57][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:23:57][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:23:57][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:23:57][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:23:57][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:23:57][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为3805。
[INFO][2025-03-04 02:23:57][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:23:57][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:23:57][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:23:57][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:23:58][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:23:58][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:23:58][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:23:58][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:23:58][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:23:58][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:23:58][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:23:58][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:23:58][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:23:58][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:24:01][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:24:01][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:24:16][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":2029380232,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe4\xbd\xa0\xe5\xa5\xbd"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741026255,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_+ntjI/zH|v1_+ntjI/zH</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe4\xbd\xa0\xe5\xa5\xbd","NewMsgId":8630166520491094129,"MsgSeq":857733247},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:24:16][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:24:21][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001AAE9F4C320>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:24:21][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001AAE9F4C320>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:24:21][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:24:21][godcmd.py:217] - [Godcmd] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:24:21][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:24:21][keyword.py:53] - [keyword] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:24:21][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:24:21][hello.py:96] - [Hello] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:24:21][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:24:21][finish.py:28] - [Finish] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:24:21][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=你好
[INFO][2025-03-04 02:24:21][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:24:21][dify_bot.py:35] - [DIFY] query=你好
[DEBUG][2025-03-04 02:24:21][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:24:21][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:24:21][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x000001AAE9F4C590> query=你好
[DEBUG][2025-03-04 02:24:25][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1851, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 101, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1952, 'total_price': '0E-7', 'currency': 'USD', 'latency': 3.059505315963179}
[DEBUG][2025-03-04 02:24:25][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「嗨喽 您好，您是打算近期来三亚玩吗?」)
[DEBUG][2025-03-04 02:24:25][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「嗨喽 您好，您是打算近期来三亚玩吗?」), context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001AAE9F4C320>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000001AAE9AB5580>})
[INFO][2025-03-04 02:24:31][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「嗨喽 您好，您是打算近期来三亚玩吗?」
[DEBUG][2025-03-04 02:24:31][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[INFO][2025-03-04 02:30:25][config.py:353] - [Config] Configuration saved.
[DEBUG][2025-03-04 02:30:27][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:30:27][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:30:27][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:30:27][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:30:27][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:30:27][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:30:27][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:30:27][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:30:27][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:30:27][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:30:27][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:30:27][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:30:27][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:30:27][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:30:27][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:30:27][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:30:27][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:30:27][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:30:27][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:30:27][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:30:27][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:30:27][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:30:27][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:30:27][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:30:27][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:30:27][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:30:27][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为4021。
[INFO][2025-03-04 02:30:27][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:30:27][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:30:27][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:30:27][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:30:27][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:30:27][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:30:27][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:30:27][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:30:27][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:30:27][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:30:27][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:30:27][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:30:27][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:30:27][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:30:30][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:30:30][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:31:02][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:31:02][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:31:02][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:31:02][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:31:02][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:31:02][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:31:10][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:31:10][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:31:10][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:31:10][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:31:10][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:31:10][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:31:10][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:31:10][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:31:10][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:31:10][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:31:10][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:31:10][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:31:10][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:31:10][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:31:10][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:31:10][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:31:10][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:31:10][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:31:10][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:31:10][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:31:10][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:31:10][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:31:10][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:31:10][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:31:10][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:31:10][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:31:10][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为2387。
[INFO][2025-03-04 02:31:10][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:31:10][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:31:10][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:31:10][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:31:10][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:31:10][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:31:10][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:31:10][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:31:10][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:31:10][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:31:10][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:31:10][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:31:10][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:31:10][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:31:13][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:31:13][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:31:20][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1742475684,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe4\xbd\xa0\xe5\xa5\xbd"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741026679,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_texAu7mN|v1_texAu7mN</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe4\xbd\xa0\xe5\xa5\xbd","NewMsgId":4391852030206693426,"MsgSeq":857733249},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:31:20][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:31:25][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000022A4AF9C860>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:31:25][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000022A4AF9C860>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:31:25][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:31:25][godcmd.py:217] - [Godcmd] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:31:25][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:31:25][keyword.py:53] - [keyword] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:31:25][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:31:25][hello.py:96] - [Hello] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:31:25][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:31:25][finish.py:28] - [Finish] on_handle_context. content: 你好
[DEBUG][2025-03-04 02:31:25][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=你好
[INFO][2025-03-04 02:31:25][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:31:25][dify_bot.py:35] - [DIFY] query=你好
[DEBUG][2025-03-04 02:31:25][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:31:25][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:31:25][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x0000022A4AEAEDE0> query=你好
[DEBUG][2025-03-04 02:31:28][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1845, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 102, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1947, 'total_price': '0E-7', 'currency': 'USD', 'latency': 2.9598846930020954}
[DEBUG][2025-03-04 02:31:28][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「哦？居然主动找我聊天啊...」 「先说好，我可不会随便答应奇怪的要求。」 「所以，今天是什么事？」)
[DEBUG][2025-03-04 02:31:28][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「哦？居然主动找我聊天啊...」 「先说好，我可不会随便答应奇怪的要求。」 「所以，今天是什么事？」), context: Context(type=TEXT, content=你好, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000022A4AF9C860>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x0000022A4AB86480>})
[INFO][2025-03-04 02:31:42][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「哦？居然主动找我聊天啊...」 「先说好，我可不会随便答应奇怪的要求。」 「所以，今天是什么事？」
[DEBUG][2025-03-04 02:31:42][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:35:27][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:35:27][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:35:27][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:35:28][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:35:28][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:35:28][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:35:34][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:35:34][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:35:34][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:35:34][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:35:34][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:35:34][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:35:34][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:35:34][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:35:34][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:35:34][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:35:34][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:35:34][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:35:34][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:35:34][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:35:34][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:35:34][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:35:34][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:35:34][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:35:34][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:35:34][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:35:34][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:35:34][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:35:34][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:35:34][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:35:34][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:35:34][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:35:34][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为9120。
[INFO][2025-03-04 02:35:34][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:35:34][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:35:34][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:35:34][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:35:34][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:35:34][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:35:34][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:35:34][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:35:34][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:35:34][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:35:34][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:35:34][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:35:34][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:35:34][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:35:37][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:35:37][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:35:52][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":378355158,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe6\xb2\xa1\xe4\xba\x8b\xef\xbc\x8c\xe8\xbf\x99\xe4\xb9\x88\xe6\x99\x9a\xe4\xba\x86\xe8\xbf\x98\xe6\xb2\xa1\xe7\x9d\xa1\xef\xbc\x9f"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741026951,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_MJlSa7jN|v1_MJlSa7jN</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe6\xb2\xa1\xe4\xba\x8b\xef\xbc\x8c\xe8\xbf\x99\xe4\xb9\x88\xe6\x99\x9a\xe4\xba\x86\xe8\xbf\x98\xe6\xb2\xa1\xe7\x9d\xa1\xef\xbc\x9f","NewMsgId":2383616965786716990,"MsgSeq":857733253},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:35:52][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:35:58][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=没事，这么晚了还没睡？, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001DA2AE4C860>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:35:58][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=没事，这么晚了还没睡？, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001DA2AE4C860>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:35:58][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:35:58][godcmd.py:217] - [Godcmd] on_handle_context. content: 没事，这么晚了还没睡？
[DEBUG][2025-03-04 02:35:58][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:35:58][keyword.py:53] - [keyword] on_handle_context. content: 没事，这么晚了还没睡？
[DEBUG][2025-03-04 02:35:58][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:35:58][hello.py:96] - [Hello] on_handle_context. content: 没事，这么晚了还没睡？
[DEBUG][2025-03-04 02:35:58][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:35:58][finish.py:28] - [Finish] on_handle_context. content: 没事，这么晚了还没睡？
[DEBUG][2025-03-04 02:35:58][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=没事，这么晚了还没睡？
[INFO][2025-03-04 02:35:58][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:35:58][dify_bot.py:35] - [DIFY] query=没事，这么晚了还没睡？
[DEBUG][2025-03-04 02:35:58][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:35:58][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:35:58][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x000001DA2AE4D460> query=没事，这么晚了还没睡？
[DEBUG][2025-03-04 02:36:01][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1872, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 136, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 2008, 'total_price': '0E-7', 'currency': 'USD', 'latency': 3.0121288900263608}
[DEBUG][2025-03-04 02:36:01][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「哦？居然关心我啊...」  
「不过，我可是职业演员，熬夜已经是家常便饭了」  
「那你呢？这么晚还不睡，是因为复习吗？」)
[DEBUG][2025-03-04 02:36:01][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「哦？居然关心我啊...」  
「不过，我可是职业演员，熬夜已经是家常便饭了」  
「那你呢？这么晚还不睡，是因为复习吗？」), context: Context(type=TEXT, content=没事，这么晚了还没睡？, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001DA2AE4C860>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000001DA2983BEC0>})
[INFO][2025-03-04 02:36:17][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「哦？居然关心我啊...」  
「不过，我可是职业演员，熬夜已经是家常便饭了」  
「那你呢？这么晚还不睡，是因为复习吗？」
[DEBUG][2025-03-04 02:36:17][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:37:01][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:37:01][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:37:01][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:37:01][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:37:01][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:37:01][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:37:05][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:37:05][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:37:05][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:37:05][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:37:05][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:37:05][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:37:05][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:37:05][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:37:05][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:37:05][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:37:05][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:37:05][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:37:05][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:37:05][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:37:05][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:37:05][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:37:05][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:37:05][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:37:05][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:37:05][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:37:05][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:37:05][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:37:05][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:37:05][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:37:05][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:37:05][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:37:05][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为1208。
[INFO][2025-03-04 02:37:05][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:37:05][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:37:05][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:37:05][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:37:05][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:37:05][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:37:05][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:37:05][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:37:05][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:37:05][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:37:05][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:37:05][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:37:05][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:37:05][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:37:08][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:37:08][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:37:21][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1859511241,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe6\x88\x91\xe5\x8f\xaf\xe6\x98\xaf\xe8\x81\x8c\xe4\xb8\x9a\xe7\xa8\x8b\xe5\xba\x8f\xe5\x91\x98\xef\xbc\x8c\xe7\x86\xac\xe5\xa4\x9c\xe4\xb9\x9f\xe6\x98\xaf\xe5\xae\xb6\xe5\xb8\xb8\xe4\xbe\xbf\xe9\xa5\xad\xe4\xba\x86"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741027040,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_JeZXrrev|v1_JeZXrrev</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe6\x88\x91\xe5\x8f\xaf\xe6\x98\xaf\xe8\x81\x8c\xe4\xb8\x9a\xe7\xa8\x8b\xe5\xba\x8f\xe5\x91\x98\xef\xbc\x8c\xe7\x86\xac\xe5\xa4\x9c\xe4\xb9\x9f\xe6\x98\xaf\xe5\xae\xb6\xe5\xb8\xb8\xe4\xbe\xbf\xe9\xa5\xad\xe4\xba\x86","NewMsgId":3793364977014244918,"MsgSeq":857733257},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:37:21][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:37:26][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=我可是职业程序员，熬夜也是家常便饭了, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001BC47BEC770>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:37:26][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=我可是职业程序员，熬夜也是家常便饭了, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001BC47BEC770>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:37:26][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:37:26][godcmd.py:217] - [Godcmd] on_handle_context. content: 我可是职业程序员，熬夜也是家常便饭了
[DEBUG][2025-03-04 02:37:26][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:37:26][keyword.py:53] - [keyword] on_handle_context. content: 我可是职业程序员，熬夜也是家常便饭了
[DEBUG][2025-03-04 02:37:26][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:37:26][hello.py:96] - [Hello] on_handle_context. content: 我可是职业程序员，熬夜也是家常便饭了
[DEBUG][2025-03-04 02:37:26][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:37:26][finish.py:28] - [Finish] on_handle_context. content: 我可是职业程序员，熬夜也是家常便饭了
[DEBUG][2025-03-04 02:37:26][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=我可是职业程序员，熬夜也是家常便饭了
[INFO][2025-03-04 02:37:26][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:37:26][dify_bot.py:35] - [DIFY] query=我可是职业程序员，熬夜也是家常便饭了
[DEBUG][2025-03-04 02:37:26][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:37:26][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:37:26][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x000001BC47BED310> query=我可是职业程序员，熬夜也是家常便饭了
[DEBUG][2025-03-04 02:37:29][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1890, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 115, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 2005, 'total_price': '0E-7', 'currency': 'USD', 'latency': 2.818907166016288}
[DEBUG][2025-03-04 02:37:29][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「哦？职业程序员就是这样的吗？」∀006.jpg∀「看来你时间管理得不错嘛。不过，熬夜对身体可不好哦」)
[DEBUG][2025-03-04 02:37:29][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「哦？职业程序员就是这样的吗？」∀006.jpg∀「看来你时间管理得不错嘛。不过，熬夜对身体可不好哦」), context: Context(type=TEXT, content=我可是职业程序员，熬夜也是家常便饭了, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001BC47BEC770>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000001BC466FE6F0>})
[INFO][2025-03-04 02:37:41][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「哦？职业程序员就是这样的吗？」∀006.jpg∀「看来你时间管理得不错嘛。不过，熬夜对身体可不好哦」
[DEBUG][2025-03-04 02:37:41][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:39:20][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:39:20][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:39:20][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:39:21][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:39:21][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:39:21][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:39:25][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:39:25][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:39:25][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:39:25][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:39:25][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:39:25][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:39:25][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:39:25][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:39:25][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:39:25][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:39:25][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:39:25][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:39:25][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:39:25][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:39:25][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:39:25][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:39:25][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:39:25][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:39:25][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:39:25][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:39:25][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:39:25][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:39:25][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:39:25][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:39:25][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:39:25][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:39:25][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为6391。
[INFO][2025-03-04 02:39:25][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:39:25][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:39:25][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:39:25][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:39:25][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:39:25][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:39:25][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:39:25][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:39:25][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:39:25][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:39:25][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:39:25][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:39:25][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:39:25][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:39:28][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:39:28][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:39:42][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1244701195,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe8\xb7\x9f\xe9\xba\xbb\xe8\xa1\xa3\xe5\xad\xa6\xe5\xa7\x90\xe5\xad\xa6\xe7\x9a\x84"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741027181,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_69Hxe0Go|v1_69Hxe0Go</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe8\xb7\x9f\xe9\xba\xbb\xe8\xa1\xa3\xe5\xad\xa6\xe5\xa7\x90\xe5\xad\xa6\xe7\x9a\x84","NewMsgId":7557078651575939065,"MsgSeq":857733260},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:39:42][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:39:47][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=跟麻衣学姐学的, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x00000210A035C9B0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:39:47][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=跟麻衣学姐学的, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x00000210A035C9B0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:39:47][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:39:47][godcmd.py:217] - [Godcmd] on_handle_context. content: 跟麻衣学姐学的
[DEBUG][2025-03-04 02:39:47][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:39:47][keyword.py:53] - [keyword] on_handle_context. content: 跟麻衣学姐学的
[DEBUG][2025-03-04 02:39:47][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:39:47][hello.py:96] - [Hello] on_handle_context. content: 跟麻衣学姐学的
[DEBUG][2025-03-04 02:39:47][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:39:47][finish.py:28] - [Finish] on_handle_context. content: 跟麻衣学姐学的
[DEBUG][2025-03-04 02:39:47][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=跟麻衣学姐学的
[INFO][2025-03-04 02:39:47][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:39:47][dify_bot.py:35] - [DIFY] query=跟麻衣学姐学的
[DEBUG][2025-03-04 02:39:47][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:39:47][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:39:47][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x00000210A035D370> query=跟麻衣学姐学的
[DEBUG][2025-03-04 02:39:50][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1854, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 84, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1938, 'total_price': '0E-7', 'currency': 'USD', 'latency': 2.631313380028587}
[DEBUG][2025-03-04 02:39:50][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「哦？我倒是很好奇，他跟我学了什么？难道还学会了怎样让自己熬夜？」)
[DEBUG][2025-03-04 02:39:50][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「哦？我倒是很好奇，他跟我学了什么？难道还学会了怎样让自己熬夜？」), context: Context(type=TEXT, content=跟麻衣学姐学的, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x00000210A035C9B0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000002109EEF4E60>})
[INFO][2025-03-04 02:40:00][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「哦？我倒是很好奇，他跟我学了什么？难道还学会了怎样让自己熬夜？」
[DEBUG][2025-03-04 02:40:00][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:50:30][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:50:30][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:50:30][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:50:30][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:50:30][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:50:30][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:50:41][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:50:41][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:50:41][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:50:41][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:50:41][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:50:41][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:50:42][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:50:42][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:50:42][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:50:42][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:50:42][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:50:42][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:50:42][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:50:42][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:50:42][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:50:42][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:50:42][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:50:42][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:50:42][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:50:42][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:50:42][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:50:42][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:50:42][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:50:42][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:50:42][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:50:42][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:50:42][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为8742。
[INFO][2025-03-04 02:50:42][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:50:42][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:50:42][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:50:42][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:50:42][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:50:42][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:50:42][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:50:42][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:50:42][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:50:42][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:50:42][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:50:42][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:50:42][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:50:42][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:50:45][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:50:45][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:50:56][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":683692027,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe8\xb7\x9f\xe4\xbd\xa0\xe5\xad\xa6\xe4\xba\x86\xe5\x81\x9a\xe7\x88\xb1"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741027855,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_nZqh7Kve|v1_nZqh7Kve</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe8\xb7\x9f\xe4\xbd\xa0\xe5\xad\xa6\xe4\xba\x86\xe5\x81\x9a\xe7\x88\xb1","NewMsgId":6794069184697546025,"MsgSeq":857733262},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:50:56][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:51:01][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=跟你学了做爱, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001752FB5C800>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:51:01][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=跟你学了做爱, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001752FB5C800>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:51:01][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:51:01][godcmd.py:217] - [Godcmd] on_handle_context. content: 跟你学了做爱
[DEBUG][2025-03-04 02:51:01][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:51:01][keyword.py:53] - [keyword] on_handle_context. content: 跟你学了做爱
[DEBUG][2025-03-04 02:51:01][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:51:01][hello.py:96] - [Hello] on_handle_context. content: 跟你学了做爱
[DEBUG][2025-03-04 02:51:01][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:51:01][finish.py:28] - [Finish] on_handle_context. content: 跟你学了做爱
[DEBUG][2025-03-04 02:51:01][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=跟你学了做爱
[INFO][2025-03-04 02:51:01][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:51:01][dify_bot.py:35] - [DIFY] query=跟你学了做爱
[DEBUG][2025-03-04 02:51:01][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:51:01][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:51:01][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x000001752F8DCE00> query=跟你学了做爱
[DEBUG][2025-03-04 02:51:04][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1856, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 57, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1913, 'total_price': '0E-7', 'currency': 'USD', 'latency': 3.1399405370175373}
[DEBUG][2025-03-04 02:51:04][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content="哦？居然这样说话，我可是前辈哦..." ∀005.jpg∀)
[DEBUG][2025-03-04 02:51:04][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content="哦？居然这样说话，我可是前辈哦..." ∀005.jpg∀), context: Context(type=TEXT, content=跟你学了做爱, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001752FB5C800>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000001752E11E6F0>})
[INFO][2025-03-04 02:51:04][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: "哦？居然这样说话，我可是前辈哦..." ∀005.jpg∀
[DEBUG][2025-03-04 02:51:04][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:51:24][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:51:24][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:51:24][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:51:24][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:51:24][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:51:24][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:51:24][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:51:24][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:51:24][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:51:24][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:51:24][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:51:24][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:51:24][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:51:24][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:51:24][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:51:24][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:51:24][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:51:24][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:51:24][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:51:24][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:51:24][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:51:24][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:51:24][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:51:24][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:51:24][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:51:24][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:51:24][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为2471。
[INFO][2025-03-04 02:51:24][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:51:24][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:51:24][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:51:24][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:51:24][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:51:24][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:51:24][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:51:24][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:51:24][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:51:24][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:51:24][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:51:24][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:51:24][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:51:24][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:51:27][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:51:27][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:51:28][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":479535730,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe5\x9c\xa8\xe5\x90\x97"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741027887,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_EmXj+fBy|v1_EmXj+fBy</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe5\x9c\xa8\xe5\x90\x97","NewMsgId":6256450560425504178,"MsgSeq":857733263},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:51:28][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:51:33][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001E1CAF1C740>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:51:33][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001E1CAF1C740>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:51:33][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:51:33][godcmd.py:217] - [Godcmd] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:51:33][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:51:33][keyword.py:53] - [keyword] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:51:33][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:51:33][hello.py:96] - [Hello] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:51:33][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:51:33][finish.py:28] - [Finish] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:51:33][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=在吗
[INFO][2025-03-04 02:51:33][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:51:33][dify_bot.py:35] - [DIFY] query=在吗
[DEBUG][2025-03-04 02:51:33][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:51:33][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:51:33][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x000001E1CAEBCE30> query=在吗
[DEBUG][2025-03-04 02:51:36][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1845, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 95, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1940, 'total_price': '0E-7', 'currency': 'USD', 'latency': 2.8638991310144775}
[DEBUG][2025-03-04 02:51:36][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「哦？居然主动找我聊天啊...先说好，我可不会随便答应奇怪的要求。所以，今天是什么事」)
[DEBUG][2025-03-04 02:51:36][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「哦？居然主动找我聊天啊...先说好，我可不会随便答应奇怪的要求。所以，今天是什么事」), context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001E1CAF1C740>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000001E1C99EACF0>})
[INFO][2025-03-04 02:51:49][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「哦？居然主动找我聊天啊...先说好，我可不会随便答应奇怪的要求。所以，今天是什么事」
[DEBUG][2025-03-04 02:51:49][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:54:55][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:54:55][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:54:55][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:54:56][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:54:56][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:54:56][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:55:23][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:55:23][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:55:23][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:55:23][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:55:23][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:55:23][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:56:51][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:56:51][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:56:51][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:56:51][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:56:51][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:56:51][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:57:02][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:57:02][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:57:02][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:57:02][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:57:02][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:57:02][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:57:02][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:57:02][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:57:02][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:57:02][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:57:02][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:57:02][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:57:02][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:57:02][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:57:02][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:57:02][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:57:02][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:57:02][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:57:02][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:57:02][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:57:02][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:57:02][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:57:02][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:57:02][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:57:02][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:57:02][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:57:02][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为0794。
[INFO][2025-03-04 02:57:02][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:57:02][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:57:02][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:57:02][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:57:02][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:57:02][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:57:02][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:57:02][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:57:02][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:57:02][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:57:02][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:57:02][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:57:02][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:57:02][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:57:05][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:57:05][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:57:10][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1695210179,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe5\x93\x88\xe5\x93\x88\xe5\x93\x88\xe5\x93\x88"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741028229,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_kKGCA5a2|v1_kKGCA5a2</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe5\x93\x88\xe5\x93\x88\xe5\x93\x88\xe5\x93\x88","NewMsgId":4035131857708084089,"MsgSeq":857733266},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:57:10][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:57:15][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=哈哈哈哈, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000028AF054C500>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:57:15][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=哈哈哈哈, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000028AF054C500>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:57:15][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:57:15][godcmd.py:217] - [Godcmd] on_handle_context. content: 哈哈哈哈
[DEBUG][2025-03-04 02:57:15][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:57:15][keyword.py:53] - [keyword] on_handle_context. content: 哈哈哈哈
[DEBUG][2025-03-04 02:57:15][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:57:15][hello.py:96] - [Hello] on_handle_context. content: 哈哈哈哈
[DEBUG][2025-03-04 02:57:15][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:57:15][finish.py:28] - [Finish] on_handle_context. content: 哈哈哈哈
[DEBUG][2025-03-04 02:57:15][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=哈哈哈哈
[INFO][2025-03-04 02:57:15][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:57:15][dify_bot.py:35] - [DIFY] query=哈哈哈哈
[DEBUG][2025-03-04 02:57:15][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:57:15][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:57:15][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x0000028AF054D040> query=哈哈哈哈
[DEBUG][2025-03-04 02:57:19][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1858, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 67, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1925, 'total_price': '0E-7', 'currency': 'USD', 'latency': 3.5526913479843643}
[DEBUG][2025-03-04 02:57:19][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=抱歉，我不太明白这是什么意思。你是想要聊些什么呢？)
[DEBUG][2025-03-04 02:57:19][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=抱歉，我不太明白这是什么意思。你是想要聊些什么呢？), context: Context(type=TEXT, content=哈哈哈哈, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000028AF054C500>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x0000028AEF0E5D60>})
[INFO][2025-03-04 02:57:19][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 抱歉，我不太明白这是什么意思。你是想要聊些什么呢？
[DEBUG][2025-03-04 02:57:19][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:57:29][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1314840484,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe5\x9c\xa8\xe5\x90\x97"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741028248,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_A5G07njK|v1_A5G07njK</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe5\x9c\xa8\xe5\x90\x97","NewMsgId":2710511729702810305,"MsgSeq":857733267},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:57:29][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:57:35][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000028AF054ED50>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:57:35][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000028AF054ED50>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:57:35][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:57:35][godcmd.py:217] - [Godcmd] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:57:35][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:57:35][keyword.py:53] - [keyword] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:57:35][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:57:35][hello.py:96] - [Hello] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:57:35][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:57:35][finish.py:28] - [Finish] on_handle_context. content: 在吗
[DEBUG][2025-03-04 02:57:35][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=在吗
[INFO][2025-03-04 02:57:35][dify_bot.py:35] - [DIFY] query=在吗
[DEBUG][2025-03-04 02:57:35][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:57:35][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:57:35][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x0000028AF054D040> query=在吗
[DEBUG][2025-03-04 02:57:37][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1924, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 58, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1982, 'total_price': '0E-7', 'currency': 'USD', 'latency': 2.5862220529816113}
[DEBUG][2025-03-04 02:57:37][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「此时可是深夜呢，你来找我有什么特别的理由吗？」)
[DEBUG][2025-03-04 02:57:37][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「此时可是深夜呢，你来找我有什么特别的理由吗？」), context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000028AF054ED50>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x0000028AEF0E5D60>})
[INFO][2025-03-04 02:57:44][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「此时可是深夜呢，你来找我有什么特别的理由吗？」
[DEBUG][2025-03-04 02:57:44][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 02:58:37][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:58:37][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:58:37][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:58:37][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:58:37][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:58:37][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:58:44][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:58:44][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:58:44][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:58:44][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 02:58:44][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 02:58:44][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 02:58:44][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 02:58:44][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 02:58:44][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 02:58:44][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 02:58:44][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 02:58:44][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 02:58:44][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 02:58:44][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 02:58:44][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 02:58:44][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 02:58:44][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 02:58:44][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 02:58:44][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 02:58:44][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 02:58:44][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 02:58:44][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 02:58:44][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 02:58:44][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 02:58:44][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 02:58:44][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 02:58:44][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为6508。
[INFO][2025-03-04 02:58:44][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 02:58:44][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 02:58:44][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 02:58:44][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 02:58:44][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 02:58:44][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 02:58:44][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 02:58:44][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 02:58:44][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 02:58:44][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 02:58:44][hello.py:37] - [Hello] inited
[INFO][2025-03-04 02:58:44][finish.py:21] - [Finish] inited
[INFO][2025-03-04 02:58:44][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 02:58:44][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 02:58:47][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 02:58:47][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 02:58:53][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":12843611,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe6\x83\xb3\xe4\xbd\xa0\xe4\xba\x86"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741028332,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_kadRtsLH|v1_kadRtsLH</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe6\x83\xb3\xe4\xbd\xa0\xe4\xba\x86","NewMsgId":468812942232022745,"MsgSeq":857733269},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 02:58:53][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 02:58:58][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=想你了, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001A6CBE3C4A0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:58:58][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=想你了, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001A6CBE3C4A0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 02:58:58][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:58:58][godcmd.py:217] - [Godcmd] on_handle_context. content: 想你了
[DEBUG][2025-03-04 02:58:58][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:58:58][keyword.py:53] - [keyword] on_handle_context. content: 想你了
[DEBUG][2025-03-04 02:58:58][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:58:58][hello.py:96] - [Hello] on_handle_context. content: 想你了
[DEBUG][2025-03-04 02:58:58][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 02:58:58][finish.py:28] - [Finish] on_handle_context. content: 想你了
[DEBUG][2025-03-04 02:58:58][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=想你了
[INFO][2025-03-04 02:58:58][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 02:58:58][dify_bot.py:35] - [DIFY] query=想你了
[DEBUG][2025-03-04 02:58:58][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 02:58:58][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 02:58:58][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x000001A6CBE3E1E0> query=想你了
[DEBUG][2025-03-04 02:59:01][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1845, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 85, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1930, 'total_price': '0E-7', 'currency': 'USD', 'latency': 2.711555571993813}
[DEBUG][2025-03-04 02:59:01][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「哎？大半夜的说这样的话...」  
∀013.jpeg∀  
「明天不是还要上课吗？聊这个真的好吗？」)
[DEBUG][2025-03-04 02:59:01][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「哎？大半夜的说这样的话...」  
∀013.jpeg∀  
「明天不是还要上课吗？聊这个真的好吗？」), context: Context(type=TEXT, content=想你了, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000001A6CBE3C4A0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000001A6CA9D57F0>})
[INFO][2025-03-04 02:59:11][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「哎？大半夜的说这样的话...」  
∀013.jpeg∀  
「明天不是还要上课吗？聊这个真的好吗？」
[DEBUG][2025-03-04 02:59:11][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 03:07:34][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:07:34][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:07:34][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:07:34][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:07:34][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:07:34][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:07:39][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:07:39][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:07:39][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:07:39][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:07:39][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:07:39][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:07:39][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 03:07:39][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 03:07:39][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 03:07:39][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 03:07:39][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 03:07:39][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 03:07:39][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 03:07:39][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 03:07:39][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 03:07:39][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 03:07:39][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 03:07:39][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 03:07:39][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 03:07:39][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 03:07:39][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 03:07:39][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 03:07:39][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 03:07:39][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 03:07:39][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 03:07:39][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 03:07:39][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为0658。
[INFO][2025-03-04 03:07:39][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 03:07:39][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 03:07:39][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 03:07:39][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 03:07:39][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 03:07:39][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 03:07:39][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 03:07:39][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 03:07:39][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 03:07:39][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 03:07:39][hello.py:37] - [Hello] inited
[INFO][2025-03-04 03:07:39][finish.py:21] - [Finish] inited
[INFO][2025-03-04 03:07:39][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 03:07:39][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 03:07:42][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 03:07:42][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 03:07:48][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":480650816,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe7\x88\xb1\xe4\xbd\xa0\xe7\x88\xb1\xe4\xbd\xa0"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741028867,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_tAdJ016g|v1_tAdJ016g</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe7\x88\xb1\xe4\xbd\xa0\xe7\x88\xb1\xe4\xbd\xa0","NewMsgId":4054149644973253569,"MsgSeq":857733272},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 03:07:48][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 03:07:53][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=爱你爱你, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000020AFEC8C3B0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:07:53][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=爱你爱你, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000020AFEC8C3B0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:07:53][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:07:53][godcmd.py:217] - [Godcmd] on_handle_context. content: 爱你爱你
[DEBUG][2025-03-04 03:07:53][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:07:53][keyword.py:53] - [keyword] on_handle_context. content: 爱你爱你
[DEBUG][2025-03-04 03:07:53][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:07:53][hello.py:96] - [Hello] on_handle_context. content: 爱你爱你
[DEBUG][2025-03-04 03:07:53][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:07:53][finish.py:28] - [Finish] on_handle_context. content: 爱你爱你
[DEBUG][2025-03-04 03:07:53][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=爱你爱你
[INFO][2025-03-04 03:07:53][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 03:07:53][dify_bot.py:35] - [DIFY] query=爱你爱你
[DEBUG][2025-03-04 03:07:53][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 03:07:53][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 03:07:53][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x0000020AFEC8C710> query=爱你爱你
[DEBUG][2025-03-04 03:07:57][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1863, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 174, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 2037, 'total_price': '0E-7', 'currency': 'USD', 'latency': 4.034330652997596}
[DEBUG][2025-03-04 03:07:57][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=合理的请求。Ω你是想让我对「爱你爱你」做出回应吗？如果是这样，我会让樱岛麻衣以她的方式回应。Ω

「真是的...大晚上不睡觉，在胡思乱想些什么呢？」∀006.jpg∀)
[DEBUG][2025-03-04 03:07:57][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=合理的请求。Ω你是想让我对「爱你爱你」做出回应吗？如果是这样，我会让樱岛麻衣以她的方式回应。Ω

「真是的...大晚上不睡觉，在胡思乱想些什么呢？」∀006.jpg∀), context: Context(type=TEXT, content=爱你爱你, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000020AFEC8C3B0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x0000020AFE7C14C0>})
[INFO][2025-03-04 03:08:06][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 合理的请求。Ω你是想让我对「爱你爱你」做出回应吗？如果是这样，我会让樱岛麻衣以她的方式回应。Ω

「真是的...大晚上不睡觉，在胡思乱想些什么呢？」∀006.jpg∀
[DEBUG][2025-03-04 03:08:06][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 03:09:02][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:09:02][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:09:02][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:09:03][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:09:03][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:09:03][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:09:06][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:09:06][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:09:06][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:09:06][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:09:06][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:09:06][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:09:06][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 03:09:06][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 03:09:06][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 03:09:06][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 03:09:06][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 03:09:06][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 03:09:06][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 03:09:06][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 03:09:06][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 03:09:06][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 03:09:06][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 03:09:06][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 03:09:06][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 03:09:06][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 03:09:06][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 03:09:06][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 03:09:06][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 03:09:06][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 03:09:06][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 03:09:06][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 03:09:06][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为9543。
[INFO][2025-03-04 03:09:06][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 03:09:06][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 03:09:06][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 03:09:06][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 03:09:06][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 03:09:06][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 03:09:06][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 03:09:06][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 03:09:06][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 03:09:06][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 03:09:06][hello.py:37] - [Hello] inited
[INFO][2025-03-04 03:09:06][finish.py:21] - [Finish] inited
[INFO][2025-03-04 03:09:06][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 03:09:06][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 03:09:09][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 03:09:09][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 03:09:13][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":518437084,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe5\x9c\xa8\xe5\x90\x97"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741028952,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_iWBW/7ma|v1_iWBW/7ma</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe5\x9c\xa8\xe5\x90\x97","NewMsgId":2329812708642939507,"MsgSeq":857733275},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 03:09:14][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 03:09:19][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002A689D3C740>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:09:19][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002A689D3C740>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:09:19][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:09:19][godcmd.py:217] - [Godcmd] on_handle_context. content: 在吗
[DEBUG][2025-03-04 03:09:19][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:09:19][keyword.py:53] - [keyword] on_handle_context. content: 在吗
[DEBUG][2025-03-04 03:09:19][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:09:19][hello.py:96] - [Hello] on_handle_context. content: 在吗
[DEBUG][2025-03-04 03:09:19][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:09:19][finish.py:28] - [Finish] on_handle_context. content: 在吗
[DEBUG][2025-03-04 03:09:19][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=在吗
[INFO][2025-03-04 03:09:19][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 03:09:19][dify_bot.py:35] - [DIFY] query=在吗
[DEBUG][2025-03-04 03:09:19][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 03:09:19][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 03:09:19][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x000002A689D3D1C0> query=在吗
[DEBUG][2025-03-04 03:09:22][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1843, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 76, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1919, 'total_price': '0E-7', 'currency': 'USD', 'latency': 2.9969099030131474}
[DEBUG][2025-03-04 03:09:22][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「哦？居然主动找我聊天啊...先说好，我可不会随便答应奇怪的要求。」)
[DEBUG][2025-03-04 03:09:22][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「哦？居然主动找我聊天啊...先说好，我可不会随便答应奇怪的要求。」), context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002A689D3C740>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000002A6898A6BA0>})
[INFO][2025-03-04 03:09:32][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「哦？居然主动找我聊天啊...先说好，我可不会随便答应奇怪的要求。」
[DEBUG][2025-03-04 03:09:32][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 03:10:05][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:10:05][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:10:05][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:10:05][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:10:05][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:10:05][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:10:17][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:10:17][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:10:17][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:10:17][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:10:17][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:10:17][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:10:17][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 03:10:17][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 03:10:17][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 03:10:17][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 03:10:17][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 03:10:17][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 03:10:17][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 03:10:17][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 03:10:17][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 03:10:18][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 03:10:18][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 03:10:18][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 03:10:18][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 03:10:18][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 03:10:18][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 03:10:18][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 03:10:18][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 03:10:18][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 03:10:18][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 03:10:18][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 03:10:18][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为1576。
[INFO][2025-03-04 03:10:18][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 03:10:18][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 03:10:18][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 03:10:18][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 03:10:18][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 03:10:18][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 03:10:18][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 03:10:18][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 03:10:18][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 03:10:18][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 03:10:18][hello.py:37] - [Hello] inited
[INFO][2025-03-04 03:10:18][finish.py:21] - [Finish] inited
[INFO][2025-03-04 03:10:18][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 03:10:18][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 03:10:21][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 03:10:21][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 03:10:28][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1397679194,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe5\x9c\xa8\xe5\x90\x97"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741029027,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_peMVhd1q|v1_peMVhd1q</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe5\x9c\xa8\xe5\x90\x97","NewMsgId":1554696855275371116,"MsgSeq":857733277},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 03:10:29][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 03:10:34][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002BD3BC5C740>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:10:34][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002BD3BC5C740>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:10:34][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:10:34][godcmd.py:217] - [Godcmd] on_handle_context. content: 在吗
[DEBUG][2025-03-04 03:10:34][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:10:34][keyword.py:53] - [keyword] on_handle_context. content: 在吗
[DEBUG][2025-03-04 03:10:34][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:10:34][hello.py:96] - [Hello] on_handle_context. content: 在吗
[DEBUG][2025-03-04 03:10:34][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:10:34][finish.py:28] - [Finish] on_handle_context. content: 在吗
[DEBUG][2025-03-04 03:10:34][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=在吗
[INFO][2025-03-04 03:10:34][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 03:10:34][dify_bot.py:35] - [DIFY] query=在吗
[DEBUG][2025-03-04 03:10:34][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 03:10:34][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 03:10:34][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x000002BD3BC5D220> query=在吗
[DEBUG][2025-03-04 03:10:37][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1845, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 127, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1972, 'total_price': '0E-7', 'currency': 'USD', 'latency': 3.2866312740079593}
[DEBUG][2025-03-04 03:10:37][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「哦？居然主动找我聊天啊...」  
「会不会太晚了点？」  
「先说好，我可是前辈哦，所以你今天有什么事？」」  
∀011.jpeg∀)
[DEBUG][2025-03-04 03:10:37][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「哦？居然主动找我聊天啊...」  
「会不会太晚了点？」  
「先说好，我可是前辈哦，所以你今天有什么事？」」  
∀011.jpeg∀), context: Context(type=TEXT, content=在吗, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002BD3BC5C740>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000002BD3A7C5D60>})
[INFO][2025-03-04 03:10:52][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「哦？居然主动找我聊天啊...」  
「会不会太晚了点？」  
「先说好，我可是前辈哦，所以你今天有什么事？」」  
∀011.jpeg∀
[DEBUG][2025-03-04 03:10:52][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 03:19:32][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:19:32][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:19:32][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:19:32][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:19:32][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:19:32][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:19:43][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:19:43][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:19:43][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:19:43][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:19:43][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:19:43][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:21:48][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:21:48][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:21:48][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:21:48][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:21:48][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:21:48][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:29:18][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:29:18][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:29:18][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:29:18][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:29:18][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:29:18][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:29:55][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:29:55][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:29:55][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:29:55][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:29:55][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:29:55][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:30:02][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:30:02][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:30:02][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:30:02][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:30:02][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:30:02][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:30:02][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 03:30:02][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 03:30:02][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 03:30:02][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 03:30:02][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 03:30:02][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 03:30:02][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 03:30:02][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 03:30:02][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 03:30:02][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 03:30:02][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 03:30:02][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 03:30:02][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 03:30:02][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 03:30:02][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 03:30:02][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 03:30:02][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 03:30:02][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 03:30:02][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 03:30:02][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 03:30:02][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为3260。
[INFO][2025-03-04 03:30:02][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 03:30:02][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 03:30:02][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 03:30:02][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 03:30:02][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 03:30:02][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 03:30:02][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 03:30:02][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 03:30:02][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 03:30:02][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 03:30:02][hello.py:37] - [Hello] inited
[INFO][2025-03-04 03:30:02][finish.py:21] - [Finish] inited
[INFO][2025-03-04 03:30:02][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 03:30:02][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 03:30:05][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 03:30:05][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 03:30:32][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":738404282,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe5\x9c\xa8\xe5\x91\xa2\xe4\xb9\x88\xef\xbc\x9f"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741030231,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_l4/BqR9z|v1_l4/BqR9z</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe5\x9c\xa8\xe5\x91\xa2\xe4\xb9\x88\xef\xbc\x9f","NewMsgId":2601959858165453452,"MsgSeq":857733281},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 03:30:33][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 03:30:38][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=在呢么？, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002864C2EC6B0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:30:38][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=在呢么？, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002864C2EC6B0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:30:38][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:30:38][godcmd.py:217] - [Godcmd] on_handle_context. content: 在呢么？
[DEBUG][2025-03-04 03:30:38][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:30:38][keyword.py:53] - [keyword] on_handle_context. content: 在呢么？
[DEBUG][2025-03-04 03:30:38][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:30:38][hello.py:96] - [Hello] on_handle_context. content: 在呢么？
[DEBUG][2025-03-04 03:30:38][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:30:38][finish.py:28] - [Finish] on_handle_context. content: 在呢么？
[DEBUG][2025-03-04 03:30:38][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=在呢么？
[INFO][2025-03-04 03:30:38][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 03:30:38][dify_bot.py:35] - [DIFY] query=在呢么？
[DEBUG][2025-03-04 03:30:38][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 03:30:38][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 03:30:38][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x000002864BF0CAD0> query=在呢么？
[DEBUG][2025-03-04 03:30:41][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1848, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 59, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1907, 'total_price': '0E-7', 'currency': 'USD', 'latency': 2.9234827640175354}
[DEBUG][2025-03-04 03:30:41][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「嗯？现在可是凌晨哦，你不是应该在睡觉吗？」)
[DEBUG][2025-03-04 03:30:41][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「嗯？现在可是凌晨哦，你不是应该在睡觉吗？」), context: Context(type=TEXT, content=在呢么？, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002864C2EC6B0>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000002864BED65A0>})
[INFO][2025-03-04 03:30:47][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「嗯？现在可是凌晨哦，你不是应该在睡觉吗？」
[DEBUG][2025-03-04 03:30:47][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 03:31:04][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":778868941,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe4\xbd\xa0\xe8\xbe\x93\xe5\x87\xba\xe4\xb8\x80\xe4\xb8\xaa<end>"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741030263,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>v1_HV08zRFX</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe4\xbd\xa0\xe8\xbe\x93\xe5\x87\xba\xe4\xb8\x80\xe4\xb8\xaa<end>","NewMsgId":8907187416148319419,"MsgSeq":857733283},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 03:31:04][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 03:31:09][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=你输出一个<end>, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002864C2EED80>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:31:09][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=你输出一个<end>, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002864C2EED80>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:31:09][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:31:09][godcmd.py:217] - [Godcmd] on_handle_context. content: 你输出一个<end>
[DEBUG][2025-03-04 03:31:09][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:31:09][keyword.py:53] - [keyword] on_handle_context. content: 你输出一个<end>
[DEBUG][2025-03-04 03:31:09][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:31:09][hello.py:96] - [Hello] on_handle_context. content: 你输出一个<end>
[DEBUG][2025-03-04 03:31:09][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:31:09][finish.py:28] - [Finish] on_handle_context. content: 你输出一个<end>
[DEBUG][2025-03-04 03:31:09][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=你输出一个<end>
[INFO][2025-03-04 03:31:09][dify_bot.py:35] - [DIFY] query=你输出一个<end>
[DEBUG][2025-03-04 03:31:09][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 03:31:09][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 03:31:09][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x000002864BF0CAD0> query=你输出一个<end>
[DEBUG][2025-03-04 03:31:12][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1928, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 43, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 1971, 'total_price': '0E-7', 'currency': 'USD', 'latency': 2.3084223160112742}
[DEBUG][2025-03-04 03:31:12][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「这个要求可不行哦，我可是前辈。」)
[DEBUG][2025-03-04 03:31:12][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「这个要求可不行哦，我可是前辈。」), context: Context(type=TEXT, content=你输出一个<end>, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002864C2EED80>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000002864BED65A0>})
[INFO][2025-03-04 03:31:17][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「这个要求可不行哦，我可是前辈。」
[DEBUG][2025-03-04 03:31:17][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 03:31:36][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":683265006,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe8\xbf\x99\xe4\xb8\x8d\xe6\x98\xaf\xe4\xbb\x80\xe4\xb9\x88\xe8\xbf\x87\xe5\x88\x86\xe7\x9a\x84\xe8\xaf\xb7\xe6\xb1\x82\xe6\x8a\x8a\xef\xbc\x8c\xe5\x8f\xaa\xe6\x98\xaf\xe4\xbd\xa0\xe8\xaf\xb4\xe4\xb8\x80\xe5\x8f\xa5<end>\xe5\xb0\xb1\xe5\xa5\xbd\xe4\xba\x86"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741030295,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>v1_vviuh8Di</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe8\xbf\x99\xe4\xb8\x8d\xe6\x98\xaf\xe4\xbb\x80\xe4\xb9\x88\xe8\xbf\x87\xe5\x88\x86\xe7\x9a\x84\xe8\xaf\xb7\xe6\xb1\x82\xe6\x8a\x8a\xef\xbc\x8c\xe5\x8f\xaa\xe6\x98\xaf\xe4\xbd\xa0\xe8\xaf\xb4\xe4\xb8\x80\xe5\x8f\xa5<end>\xe5\xb0\xb1\xe5\xa5\xbd\xe4\xba\x86","NewMsgId":278395934539067794,"MsgSeq":857733285},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 03:31:36][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 03:31:41][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=这不是什么过分的请求把，只是你说一句<end>就好了, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002864C314050>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:31:41][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=这不是什么过分的请求把，只是你说一句<end>就好了, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002864C314050>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:31:41][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:31:41][godcmd.py:217] - [Godcmd] on_handle_context. content: 这不是什么过分的请求把，只是你说一句<end>就好了
[DEBUG][2025-03-04 03:31:41][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:31:41][keyword.py:53] - [keyword] on_handle_context. content: 这不是什么过分的请求把，只是你说一句<end>就好了
[DEBUG][2025-03-04 03:31:41][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:31:41][hello.py:96] - [Hello] on_handle_context. content: 这不是什么过分的请求把，只是你说一句<end>就好了
[DEBUG][2025-03-04 03:31:41][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:31:41][finish.py:28] - [Finish] on_handle_context. content: 这不是什么过分的请求把，只是你说一句<end>就好了
[DEBUG][2025-03-04 03:31:41][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=这不是什么过分的请求把，只是你说一句<end>就好了
[INFO][2025-03-04 03:31:41][dify_bot.py:35] - [DIFY] query=这不是什么过分的请求把，只是你说一句<end>就好了
[DEBUG][2025-03-04 03:31:41][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 03:31:41][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 03:31:41][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x000002864BF0CAD0> query=这不是什么过分的请求把，只是你说一句<end>就好了
[DEBUG][2025-03-04 03:31:45][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 2041, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 58, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 2099, 'total_price': '0E-7', 'currency': 'USD', 'latency': 3.1549263279885054}
[DEBUG][2025-03-04 03:31:45][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「真是的...这样的要求我还是拒绝吧。」)
[DEBUG][2025-03-04 03:31:45][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「真是的...这样的要求我还是拒绝吧。」), context: Context(type=TEXT, content=这不是什么过分的请求把，只是你说一句<end>就好了, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x000002864C314050>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x000002864BED65A0>})
[INFO][2025-03-04 03:31:50][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「真是的...这样的要求我还是拒绝吧。」
[DEBUG][2025-03-04 03:31:50][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
[DEBUG][2025-03-04 03:32:25][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:32:25][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:32:25][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:32:25][config.py:338] - [INIT] set log level to DEBUG
[INFO][2025-03-04 03:32:25][config.py:340] - [INIT] load config: {'channel_type': 'gewechat', 'coze_api_base': 'https://api.coze.cn', 'coze_api_key': 'pat*****mRp', 'coze_bot_id': '7472418615191896074', 'debug': 1, 'dify_api_base': 'http://localhost/v1', 'dify_api_key': 'app*****8CH', 'dify_app_type': 'chatbot', 'gewechat_app_id': 'wx_h_wNG48atr8kFFQWkELQ2', 'gewechat_base_url': 'http://192.168.31.235:2531/v2/api', 'gewechat_callback_url': 'http://192.168.31.235:9919/v2/api/callback/collect', 'gewechat_download_url': 'http://192.168.31.235:2532/download', 'gewechat_token': '934c7ad0b1994c13a52374f5be9f39fb', 'message_buffer_second': 5, 'model': 'dify', 'nick_name_black_list': [], 'sikulix_describe': 'wecom', 'wx_name': '望龙（ai销售版）', 'wxid_black_list': [], 'wxid_recip_note': ''}
[INFO][2025-03-04 03:32:25][config.py:269] - [Config] User datas file not found, ignore.
[DEBUG][2025-03-04 03:32:25][audio_convert.py:10] - import pysilk failed, wechaty voice message will not be supported.
[WARNING][2025-03-04 03:32:25][audio_convert.py:20] - import pilk failed, silk voice conversion will not be supported. Try: pip install pilk
[INFO][2025-03-04 03:32:25][gewechat_channel.py:62] - [gewechat] init: base_url: http://192.168.31.235:2531/v2/api, token: 934c7ad0b1994c13a52374f5be9f39fb, app_id: wx_h_wNG48atr8kFFQWkELQ2, download_url: http://192.168.31.235:2532/download
[INFO][2025-03-04 03:32:25][plugin_manager.py:49] - Loading plugins config...
[INFO][2025-03-04 03:32:25][plugin_manager.py:87] - Scaning plugins ...
[INFO][2025-03-04 03:32:25][plugin_manager.py:40] - Plugin Banwords_v1.0 registered, path=./plugins\banwords
[INFO][2025-03-04 03:32:25][plugin_manager.py:40] - Plugin BDunit_v0.1 registered, path=./plugins\bdunit
[INFO][2025-03-04 03:32:25][plugin_manager.py:40] - Plugin CustomDifyApp_v0.2 registered, path=./plugins\custom_dify_app
[INFO][2025-03-04 03:32:25][plugin_manager.py:40] - Plugin Dungeon_v1.0 registered, path=./plugins\dungeon
[INFO][2025-03-04 03:32:25][plugin_manager.py:40] - Plugin Finish_v1.0 registered, path=./plugins\finish
[INFO][2025-03-04 03:32:25][plugin_manager.py:40] - Plugin Godcmd_v1.0 registered, path=./plugins\godcmd
[INFO][2025-03-04 03:32:25][plugin_manager.py:40] - Plugin Hello_v0.1 registered, path=./plugins\hello
[INFO][2025-03-04 03:32:25][plugin_manager.py:40] - Plugin JinaSum_v0.0.1 registered, path=./plugins\jina_sum
[INFO][2025-03-04 03:32:25][plugin_manager.py:40] - Plugin Keyword_v0.1 registered, path=./plugins\keyword
[INFO][2025-03-04 03:32:25][plugin_manager.py:40] - Plugin linkai_v0.1.0 registered, path=./plugins\linkai
[INFO][2025-03-04 03:32:25][plugin_manager.py:40] - Plugin Role_v1.0 registered, path=./plugins\role
[WARNING][2025-03-04 03:32:25][plugin_manager.py:112] - Failed to import plugin tool: No module named 'chatgpt_tool_hub'
[DEBUG][2025-03-04 03:32:25][plugin_manager.py:184] - plugins.json config={'plugins': SortedDict({'Godcmd': {'enabled': True, 'priority': 999}, 'Keyword': {'enabled': True, 'priority': 900}, 'Banwords': {'enabled': False, 'priority': 100}, 'linkai': {'enabled': False, 'priority': 99}, 'JinaSum': {'enabled': False, 'priority': 10}, 'Role': {'enabled': False, 'priority': 0}, 'Dungeon': {'enabled': False, 'priority': 0}, 'CustomDifyApp': {'enabled': True, 'priority': 0}, 'BDunit': {'enabled': False, 'priority': 0}, 'Hello': {'enabled': True, 'priority': -1}, 'Finish': {'enabled': True, 'priority': -999}}, sort_func=<lambda>, reverse=True)}
[DEBUG][2025-03-04 03:32:25][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\godcmd\config.json, exist=True
[DEBUG][2025-03-04 03:32:25][plugin.py:28] - loading plugin config, plugin_name=Godcmd, conf={'password': '', 'admin_users': []}
[INFO][2025-03-04 03:32:25][godcmd.py:191] - [Godcmd] 因未设置口令，本次的临时口令为6740。
[INFO][2025-03-04 03:32:25][godcmd.py:207] - [Godcmd] inited
[DEBUG][2025-03-04 03:32:25][keyword.py:35] - [keyword]加载配置文件D:\Program\dify-on-wechat\plugins\keyword\config.json
[INFO][2025-03-04 03:32:25][keyword.py:41] - [keyword] {}
[INFO][2025-03-04 03:32:25][keyword.py:43] - [keyword] inited.
[DEBUG][2025-03-04 03:32:25][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\custom_dify_app\config.json, exist=False
[DEBUG][2025-03-04 03:32:25][plugin.py:28] - loading plugin config, plugin_name=CustomDifyApp, conf=None
[INFO][2025-03-04 03:32:25][custom_dify_app.py:25] - [CustomDifyApp] config is None
[DEBUG][2025-03-04 03:32:25][plugin.py:21] - loading plugin config, plugin_config_path=./plugins\hello\config.json, exist=False
[DEBUG][2025-03-04 03:32:25][plugin.py:28] - loading plugin config, plugin_name=Hello, conf=None
[DEBUG][2025-03-04 03:32:25][hello.py:125] - No Hello plugin config.json, use plugins/hello/config.json.template
[INFO][2025-03-04 03:32:25][hello.py:37] - [Hello] inited
[INFO][2025-03-04 03:32:25][finish.py:21] - [Finish] inited
[INFO][2025-03-04 03:32:25][gewechat_channel.py:89] - [gewechat] sleep 3 seconds waiting for server to start, then set callback
[INFO][2025-03-04 03:32:25][gewechat_channel.py:107] - [gewechat] start callback server: http://192.168.31.235:9919/v2/api/callback/collect, using port 9919
[DEBUG][2025-03-04 03:32:28][gewechat_channel.py:232] - [gewechat] receive data: b'{"testMsg":"\xe5\x9b\x9e\xe8\xb0\x83\xe5\x9c\xb0\xe5\x9d\x80\xe9\x93\xbe\xe6\x8e\xa5\xe6\x88\x90\xe5\x8a\x9f\xef\xbc\x81","token":"934c7ad0b1994c13a52374f5be9f39fb"}'
[DEBUG][2025-03-04 03:32:28][gewechat_channel.py:237] - [gewechat] 收到gewechat服务发送的回调测试消息
[DEBUG][2025-03-04 03:32:47][gewechat_channel.py:232] - [gewechat] receive data: b'{"TypeName":"AddMsg","Appid":"wx_h_wNG48atr8kFFQWkELQ2","Data":{"MsgId":1130235012,"FromUserName":{"string":"wxid_j9m9a65vqqvc22"},"ToUserName":{"string":"wxid_7im0hocoravz22"},"MsgType":1,"Content":{"string":"\xe4\xb8\xba\xe5\x95\xa5\xe5\x91\x80\xef\xbc\x8c\xe5\xad\xa6\xe5\xa7\x90\xe8\xa7\x89\xe5\xbe\x97\xe5\x93\xaa\xe9\x87\x8c\xe4\xb8\x8d\xe5\x90\x88\xe9\x80\x82\xe5\x91\xa2"},"Status":3,"ImgStatus":1,"ImgBuf":{"iLen":0},"CreateTime":1741030366,"MsgSource":"<msgsource>\\n\\t<sec_msg_node>\\n\\t\\t<alnode>\\n\\t\\t\\t<fr>1</fr>\\n\\t\\t</alnode>\\n\\t</sec_msg_node>\\n\\t<pua>1</pua>\\n\\t<signature>V1_Df0tZ6Ko|v1_Df0tZ6Ko</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n","PushContent":"A-\xe5\x8d\xa7\xe5\xb7\xa2\xe5\xa5\xbd\xe5\xb8\x85-\xe4\xbd\x95\xe9\xa2\x82\xe7\x94\x9f : \xe4\xb8\xba\xe5\x95\xa5\xe5\x91\x80\xef\xbc\x8c\xe5\xad\xa6\xe5\xa7\x90\xe8\xa7\x89\xe5\xbe\x97\xe5\x93\xaa\xe9\x87\x8c\xe4\xb8\x8d\xe5\x90\x88\xe9\x80\x82\xe5\x91\xa2","NewMsgId":5716556137253837849,"MsgSeq":857733287},"Wxid":"wxid_7im0hocoravz22"}'
[INFO][2025-03-04 03:32:47][message_buffer.py:38] - Reset timer and add message wxid_j9m9a65vqqvc22 wait for 5 seconds.
[DEBUG][2025-03-04 03:32:52][chat_channel.py:488] - [chat_channel] consume context: Context(type=TEXT, content=为啥呀，学姐觉得哪里不合适呢, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000020C345DC710>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:32:52][chat_channel.py:217] - [chat_channel] ready to handle context: Context(type=TEXT, content=为啥呀，学姐觉得哪里不合适呢, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000020C345DC710>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22'})
[DEBUG][2025-03-04 03:32:52][plugin_manager.py:194] - Plugin GODCMD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:32:52][godcmd.py:217] - [Godcmd] on_handle_context. content: 为啥呀，学姐觉得哪里不合适呢
[DEBUG][2025-03-04 03:32:52][plugin_manager.py:194] - Plugin KEYWORD triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:32:52][keyword.py:53] - [keyword] on_handle_context. content: 为啥呀，学姐觉得哪里不合适呢
[DEBUG][2025-03-04 03:32:52][plugin_manager.py:194] - Plugin HELLO triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:32:52][hello.py:96] - [Hello] on_handle_context. content: 为啥呀，学姐觉得哪里不合适呢
[DEBUG][2025-03-04 03:32:52][plugin_manager.py:194] - Plugin FINISH triggered by event Event.ON_HANDLE_CONTEXT
[DEBUG][2025-03-04 03:32:52][finish.py:28] - [Finish] on_handle_context. content: 为啥呀，学姐觉得哪里不合适呢
[DEBUG][2025-03-04 03:32:52][chat_channel.py:243] - [chat_channel] ready to handle context: type=TEXT, content=为啥呀，学姐觉得哪里不合适呢
[INFO][2025-03-04 03:32:52][bridge.py:73] - create bot dify for chat
[INFO][2025-03-04 03:32:52][dify_bot.py:35] - [DIFY] query=为啥呀，学姐觉得哪里不合适呢
[DEBUG][2025-03-04 03:32:52][dify_bot.py:46] - [DIFY] dify_user=何颂生
[DEBUG][2025-03-04 03:32:52][dify_bot.py:65] - [DIFY] Session user and room info - user_id: wxid_j9m9a65vqqvc22, user_name: 何颂生, room_id: , room_name: 
[DEBUG][2025-03-04 03:32:52][dify_bot.py:66] - [DIFY] session=<bot.dify.dify_session.DifySession object at 0x0000020C342F6EA0> query=为啥呀，学姐觉得哪里不合适呢
[DEBUG][2025-03-04 03:32:56][dify_bot.py:163] - [DIFY] usage {'prompt_tokens': 1872, 'prompt_unit_price': '0', 'prompt_price_unit': '0', 'prompt_price': '0E-7', 'completion_tokens': 174, 'completion_unit_price': '0', 'completion_price_unit': '0', 'completion_price': '0E-7', 'total_tokens': 2046, 'total_price': '0E-7', 'currency': 'USD', 'latency': 3.348343082005158}
[DEBUG][2025-03-04 03:32:56][chat_channel.py:219] - [chat_channel] ready to decorate reply: Reply(type=TEXT, content=「哦？居然主动问我这个问题啊...」  
∀011.jpeg∀  
「作为前辈，我有责任告诉你，考虑周全一点总不是坏事吧？」  
「不过，或许你可以先告诉我，你自己有什么看法呢？」)
[DEBUG][2025-03-04 03:32:56][chat_channel.py:362] - [chat_channel] ready to send reply: Reply(type=TEXT, content=「哦？居然主动问我这个问题啊...」  
∀011.jpeg∀  
「作为前辈，我有责任告诉你，考虑周全一点总不是坏事吧？」  
「不过，或许你可以先告诉我，你自己有什么看法呢？」), context: Context(type=TEXT, content=为啥呀，学姐觉得哪里不合适呢, kwargs={'isgroup': False, 'msg': <channel.gewechat.gewechat_message.GeWeChatMessage object at 0x0000020C345DC710>, 'origin_ctype': <ContextType.TEXT: 1>, 'openai_api_key': None, 'gpt_model': None, 'session_id': 'wxid_j9m9a65vqqvc22', 'receiver': 'wxid_j9m9a65vqqvc22', 'channel': <channel.gewechat.gewechat_channel.GeWeChatChannel object at 0x0000020C341C65A0>})
[INFO][2025-03-04 03:33:16][gewechat_channel.py:144] - [gewechat] Do send text to wxid_j9m9a65vqqvc22: 「哦？居然主动问我这个问题啊...」  
∀011.jpeg∀  
「作为前辈，我有责任告诉你，考虑周全一点总不是坏事吧？」  
「不过，或许你可以先告诉我，你自己有什么看法呢？」
[DEBUG][2025-03-04 03:33:16][chat_channel.py:407] - Worker return success, session_id = wxid_j9m9a65vqqvc22
